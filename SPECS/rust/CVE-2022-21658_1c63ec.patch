From 1c63ec48b8cbf553d291a04957d86cfd191fcd78 Mon Sep 17 00:00:00 2001
From: Hans Kratz <hans@appfour.com>
Date: Thu, 20 Jan 2022 13:32:57 +0100
Subject: [PATCH] Better fix for Fuchsia

---
 library/std/src/sys/unix/fs.rs | 11 ++---------
 1 file changed, 2 insertions(+), 9 deletions(-)

diff --git a/library/std/src/sys/unix/fs.rs b/library/std/src/sys/unix/fs.rs
index 24c1be329b459..111639d92b78b 100644
--- a/library/std/src/sys/unix/fs.rs
+++ b/library/std/src/sys/unix/fs.rs
@@ -1628,20 +1628,13 @@ mod remove_dir_impl {
         target_os = "solaris",
         target_os = "illumos",
         target_os = "haiku",
-        target_os = "vxworks"
+        target_os = "vxworks",
+        target_os = "fuchsia"
     ))]
     fn is_dir(_ent: &DirEntry) -> Option<bool> {
         None
     }
 
-    #[cfg(target_os = "fuchsia")]
-    fn is_dir(ent: &DirEntry) -> Option<bool> {
-        match ent.entry.d_type {
-            libc::DT_DIR => Some(true),
-            _ => Some(false),
-        }
-    }
-
     #[cfg(not(any(
         target_os = "solaris",
         target_os = "illumos",
